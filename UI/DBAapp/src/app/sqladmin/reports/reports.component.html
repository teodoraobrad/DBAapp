<div class="app-wrapper p-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="page-title">Upiti</h2>
    <button class="btn-add" (click)="openModal()">+ Dodaj novi</button>
  </div>

 <div class="select-inline mb-4">
    <label for="textSelector">Izaberi upit:</label>
    <select id="textSelector" [(ngModel)]="selectedId" (change)="onSelectQuery()">
      <option [ngValue]="null" disabled selected>-- Izaberi --</option>
      <option *ngFor="let q of queries" [ngValue]="q.Id">{{ q.Naslov }}</option>
    </select>
  </div>

  <div class="text-display mb-4 d-flex justify-content-between align-items-start">
    <pre style="margin: 0; flex: 1;">
      <em *ngIf="!selectedId">Izaberi upit iz liste da bi se prikazao ovde.</em>
      {{ selectedQuery?.Upit }}
    </pre>
    <button class="btn-add ms-3" (click)="copyText()">Copy</button>
  </div>

  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content">
      <h3>Dodaj novi upit</h3>
      <div class="modal-body">
        <div class="form-group">
          <label for="newHeader">Naslov upita</label>
          <input type="text" id="newHeader" [(ngModel)]="newNaslov" placeholder="Unesi naslov">
        </div>
        <div class="form-group" style="grid-column: span 2;">
          <label for="newText">Tekst upita</label>
          <textarea id="newText" rows="6" [(ngModel)]="newUpit"
            placeholder="Unesi tekst upita..."
            style="width: 100%; padding: 0.5rem; border-radius: 6px; border: none;">
          </textarea>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn-cancel" (click)="closeModal()">Otkaži</button>
        <button class="btn-add" (click)="saveQuery()">Sačuvaj</button>
      </div>
    </div>
  </div>
</div>
